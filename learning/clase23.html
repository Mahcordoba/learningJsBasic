<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cambiando de contexto al llamar a una función</title>
</head>
<body>
    <h1> 
    Cambiando de contexto al llamar a una función
    </h1>
    <p>
        El contexto (o alcance) de una función es por lo general, window. Así que en ciertos casos, cuando intentamos referirnos a this en alguna parte del código, es posible que tengamos un comportamiento inesperado, porque el contexto quizás no sea el que esperamos.
        <br>
        Existen al menos tres maneras de cambiar el contexto de una función.
        <br>
        Usando el método .bind, enviamos la referencia a la función sin ejecutarla, pasando el contexto como parámetro.
        <br>
        Usando el método .call, ejecutamos inmediatamente la función con el contexto indicado
        <br>
        Usando el método .apply, es similar a .call pero los parámetros adicionales se pasan como un arreglo de valores
    </p>
    <h2>Resumen</h2>
    <p>
        Cambiando el contexto al llamar a una función

        El contexto en javascript está definido por el objeto ‘this’ cuando se ejecuta un código.
        Es muy común el error: ‘No se puede ejecutar este método porque es indefinido’, esto sucede porque el ‘this’ no es quien esperamos que sea.

        Dado el siguiente código:
        <br>
        <!-- codigo


const pablo = {
	nombre: 'Pablo',
	apellido: 'Andrés',
}
const mariela = {
	nombre: 'Mariela',
	apellido: 'Riesnik',
}

function saludar() {
	console.log(`Hola, mi nombre es ${this.nombre}`)
}

// Si ejecuto:

saludar()
// Hola, mi nombre es undefined

// Ya que tenemos la función definida dentro de un contexto global el 'this' en saludar() refiere al objeto 'window'. Por lo tanto es lo mismo que:

window.saludar()
// Hola, mi nombre es undefined

        -->
        <br>
        Cómo hacemos para cambiar ese ‘this’ de la función?
        El método ‘.bind()’ se usa justamente para cambiar  en contexto, el ‘this’, en una función.
        <!--
            const saludarAPablo = saludar.bind(pablo)
const saludarAMariela = saludar.bind(mariela)
        -->
        <br>
        ‘.bind()’ nos devuelve una nueva función atando el parámetro,_ ‘(pablo)’_ en este caso, al ‘this’ dentro de esa función, saludar en este caso.
        Este nunca modifica a la función original.
        <!--
        saludarAPablo()
        // Hola, mi nombre es Pablo

        saludarAMariela()
        // Hola, mi nombre es Mariela
        -->  
    </p>
    <p>
        Este bin se suele utilizar mucho en funciones asincronas para asegurar que el this es el this que queremos ya que en estas funciones se suele cambiar mucho el this por eso hay que asegurar que this es el que necesitamos y no tener problemas a futuro.
    </p>
</body>
</html>